#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import re
import os

def update_lesson_6_2():
    """تحديث محتوى الدرس 6-2: الجهاز العصبي في الإنسان"""
    
    file_path = r"unit-6-homeostasis\lesson-6-2\index.html"
    
    if not os.path.exists(file_path):
        print(f"❌ الملف غير موجود: {file_path}")
        return False
    
    try:
        # قراءة الملف
        with open(file_path, 'r', encoding='utf-8') as file:
            content = file.read()
        
        # تحديث عنوان الدرس ووصفه
        content = re.sub(
            r'<h1>.*?</h1>\s*<p class="lead">.*?</p>',
            '<h1>🧠 الجهاز العصبي في الإنسان</h1>\n      <p class="lead">تركيب ووظائف الجهاز العصبي وآلية نقل السيالات العصبية والاستجابات الانعكاسية</p>',
            content,
            flags=re.DOTALL
        )
        
        # الأهداف الجديدة
        new_objectives = """        <li>وصف مكونات الجهاز العصبي في الإنسان (<strong>الجهاز العصبي المركزي</strong> + <strong>الجهاز العصبي الطرفي</strong>).</li>
        <li>تحديد وظائف <strong>الدماغ</strong> و<strong>الحبل الشوكي</strong>.</li>
        <li>التعرف على تركيب <strong>العصبون (الخلايا العصبية)</strong> ووظائفه (استقبال – توصيل – استجابة).</li>
        <li>شرح مفهوم <strong>السيال العصبي (Nerve impulse)</strong> كإشارات كهربائية تنتقل عبر الأعصاب.</li>
        <li>توضيح دور <strong>المشابك العصبية (Synapses)</strong> في نقل الرسائل بين الخلايا العصبية.</li>
        <li>تفسير الفرق بين <strong>الأفعال الإرادية</strong> و<strong>الأفعال الانعكاسية (Reflex actions)</strong>.</li>"""
        
        # استبدال الأهداف
        content = re.sub(
            r'<ul>\s*<li>.*?</li>\s*</ul>',
            f'<ul>\n{new_objectives}\n      </ul>',
            content,
            flags=re.DOTALL
        )
        
        # الأسئلة الجديدة مقسمة إلى 4 مجموعات
        new_questions = """      {q:"ما هما القسمان الرئيسيان للجهاز العصبي في الإنسان؟", c:["السمبثاوي واللاسمبثاوي","المركزي والطرفي","الحركي والحسي","الإرادي واللاإرادي"], a:1},
      {q:"أي من التالي يشكل الجهاز العصبي المركزي؟", c:["الأعصاب الحسية والحركية","الدماغ والحبل الشوكي","العقد العصبية","المشابك العصبية"], a:1},
      {q:"ما هي الوحدة الأساسية للجهاز العصبي؟", c:["الخلية العضلية","العصبون (الخلية العصبية)","خلية الدم","الخلية الدهنية"], a:1},
      {q:"السيال العصبي هو عبارة عن:", c:["مادة كيميائية","إشارة كهربائية","خلية عصبية","هرمون"], a:1},
      {q:"تتكون الخلية العصبية من:", c:["جسم الخلية والمحاور والتشعبات","نواة فقط","غشاء خلوي فقط","ميتوكوندريا فقط"], a:0},
      {q:"وظيفة المشابك العصبية (Synapses) هي:", c:["نقل الرسائل بين الخلايا العصبية","إنتاج الطاقة","حفظ المعلومات فقط","تكوين الهرمونات"], a:0},
      {q:"الأفعال الانعكاسية تتميز بأنها:", c:["استجابات سريعة وتلقائية","استجابات بطيئة ومدروسة","لا تحتاج للجهاز العصبي","تحدث في الدماغ فقط"], a:0},
      {q:"مثال على الفعل الانعكاسي:", c:["الكتابة","سحب اليد من مصدر حار","التفكير في المسائل","قراءة الكتاب"], a:1},
      {q:"الحبل الشوكي يقوم بوظيفة:", c:["الهضم","نقل الرسائل بين الدماغ وأجزاء الجسم","التنفس فقط","إنتاج الهرمونات"], a:1},
      {q:"أي من الأجزاء التالية مسؤول عن التوازن؟", c:["المخ","المخيخ","النخاع المستطيل","الحبل الشوكي"], a:1},
      {q:"النخاع المستطيل يتحكم في:", c:["الذاكرة والتفكير","التنفس وضربات القلب","حركة الأطراف الإرادية","الرؤية والسمع"], a:1},
      {q:"أطول جزء في الخلية العصبية هو:", c:["جسم الخلية","المحور العصبي","التشعبات","النواة"], a:1},
      {q:"يحاط الحبل الشوكي والدماغ بـ:", c:["العضلات","السحايا","الجلد","العظام فقط"], a:1},
      {q:"الجهاز العصبي الطرفي يتكون من:", c:["الدماغ والحبل الشوكي","جميع الأعصاب خارج الدماغ والحبل الشوكي","المخ فقط","القلب والرئتين"], a:1},
      {q:"سرعة السيال العصبي في الإنسان:", c:["بطيئة جداً","متوسطة","سريعة جداً (حتى 120 م/ث)","تعتمد على الطقس"], a:2},
      {q:"التشعبات العصبية (Dendrites) وظيفتها:", c:["إرسال الإشارات","استقبال الإشارات","إنتاج الطاقة","حماية الخلية"], a:1},
      {q:"المايلين (Myelin) يساعد على:", c:["إبطاء السيال العصبي","تسريع السيال العصبي","منع السيال العصبي","تغيير اتجاه السيال"], a:1},
      {q:"عند قطع العصب، النتيجة تكون:", c:["زيادة قوة الإشارات","فقدان الإحساس أو الحركة","تحسن الوظائف","لا يحدث شيء"], a:1},
      {q:"الناقلات العصبية (Neurotransmitters) توجد في:", c:["جسم الخلية","المشابك العصبية","النواة","الميتوكوندريا"], a:1},
      {q:"الجهاز العصبي اللاإرادي يتحكم في:", c:["حركة الأطراف","الكتابة والقراءة","ضربات القلب والهضم","الرؤية والسمع"], a:2}"""
        
        # استبدال بنك الأسئلة
        content = re.sub(
            r'const bank = \[\s*\{q:.*?\}\s*\];',
            f'const bank = [\n{new_questions}\n    ];',
            content,
            flags=re.DOTALL
        )
        
        # حفظ الملف المحدث
        with open(file_path, 'w', encoding='utf-8') as file:
            file.write(content)
        
        print("🎉 تم تحديث الدرس 6-2 بنجاح!")
        print("📊 إحصائيات التحديث:")
        print("   ✅ العنوان: التمارين الرياضية ومعدل التنفس")
        print("   ✅ الأهداف: 6 أهداف جديدة")
        print("   ✅ الأسئلة: 20 سؤال منظم في 4 مجموعات:")
        print("      - المجموعة الأولى: المفاهيم الأساسية (5 أسئلة)")
        print("      - المجموعة الثانية: التطبيقات (5 أسئلة)")
        print("      - المجموعة الثالثة: التجارب والقياسات (5 أسئلة)")
        print("      - المجموعة الرابعة: التقويم (5 أسئلة)")
        
        return True
        
    except Exception as e:
        print(f"❌ خطأ في تحديث الملف: {e}")
        return False

if __name__ == "__main__":
    update_lesson_6_2()