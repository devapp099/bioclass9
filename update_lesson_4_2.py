#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import re
import os

def update_lesson_4_2():
    """ุชุญุฏูุซ ูุญุชูู ุงูุฏุฑุณ 4-2: ุงูุณููุฉ ูุณูุก ุงูุชุบุฐูุฉ"""
    
    file_path = r"unit-4-nutrition\lesson-4-2\index.html"
    
    if not os.path.exists(file_path):
        print(f"โ ุงูููู ุบูุฑ ููุฌูุฏ: {file_path}")
        return False
    
    try:
        # ูุฑุงุกุฉ ุงูููู
        with open(file_path, 'r', encoding='utf-8') as file:
            content = file.read()
        
        # ุชุญุฏูุซ ุนููุงู ุงูุฏุฑุณ ููุตูู
        content = re.sub(
            r'<h1>.*?</h1>\s*<p class="lead">.*?</p>',
            '<h1>ุงูุณููุฉ ูุณูุก ุงูุชุบุฐูุฉ</h1>\n      <p class="lead">ุฏุฑุงุณุฉ ูุดููุงุช ุงูุชุบุฐูุฉ: ุงูุณููุฉ ูุณูุก ุงูุชุบุฐูุฉ ูุฃูุฑุงุถูุง ูุทุฑู ุงูููุงูุฉ</p>',
            content,
            flags=re.DOTALL
        )
        
        # ุงูุฃูุฏุงู ุงูุฌุฏูุฏุฉ
        new_objectives = """        <li>ุชุนุฑูู ุงูุณููุฉ ูุฃุณุจุงุจูุง ุงูุฑุฆูุณุฉ (ุฒูุงุฏุฉ ุงูุณุนุฑุงุช ุงูุญุฑุงุฑูุฉ โ ููุฉ ุงููุดุงุท ุงูุจุฏูู โ ุนุงุฏุงุช ุบุฐุงุฆูุฉ ุบูุฑ ุตุญูุฉ).</li>
        <li>ุชูุณูุฑ ุงูุขุซุงุฑ ุงูุณูุจูุฉ ููุณููุฉ ุนูู ุงูุตุญุฉ (ุฃูุฑุงุถ ุงูููุจ โ ุงูุณูุฑู โ ุงุฑุชูุงุน ุถุบุท ุงูุฏู).</li>
        <li>ุชุนุฑูู ุณูุก ุงูุชุบุฐูุฉ ูุฃูุซูุชู (ููุต ุงูุจุฑูุชููุ ููุต ุงูููุชุงูููุงุชุ ููุต ุงููุนุงุฏู).</li>
        <li>ุงูุฑุจุท ุจูู ููุต ุนูุงุตุฑ ุบุฐุงุฆูุฉ ูุญุฏุฏุฉ ูุงูุฃูุฑุงุถ ุงููุงุชุฌุฉ (ุงููุณุงุญ โ ุงูุฅุณูุฑุจูุท โ ููุฑ ุงูุฏู โ ุงูููุงุดููุฑููุฑ โ ุงููุงุฑุณูุณ).</li>
        <li>ุงูุชุฑุงุญ ุทุฑู ููููุงูุฉ ูู ุงูุณููุฉ ูุณูุก ุงูุชุบุฐูุฉ (ูุธุงู ุบุฐุงุฆู ูุชูุงุฒู + ูุดุงุท ุจุฏูู).</li>"""
        
        # ุงุณุชุจุฏุงู ุงูุฃูุฏุงู (5 ุฃูุฏุงู ุจุฏูุงู ูู 6)
        content = re.sub(
            r'<ul>\s*<li>.*?</li>\s*</ul>',
            f'<ul>\n{new_objectives}\n      </ul>',
            content,
            flags=re.DOTALL
        )
        
        # ุงูุฃุณุฆูุฉ ุงูุฌุฏูุฏุฉ ููุณูุฉ ุฅูู 4 ูุฌููุนุงุช
        new_questions = """      {q:"ุงูุณููุฉ ุชุญุฏุซ ุบุงูุจูุง ุจุณุจุจ:", c:["ููุต ุงูุจุฑูุชูู","ุฒูุงุฏุฉ ุงูุณุนุฑุงุช ุงูุญุฑุงุฑูุฉ ูุน ููุฉ ุงููุดุงุท","ููุต ุงููุงุก","ููุต ุงูุฃููุงู"], a:1},
      {q:"ูู ูุถุงุนูุงุช ุงูุณููุฉ:", c:["ุฒูุงุฏุฉ ุงูููู","ุฃูุฑุงุถ ุงูููุจ","ุฒูุงุฏุฉ ุงูููุงุนุฉ","ุชูููุฉ ุงูุนุธุงู"], a:1},
      {q:"ุงูุณููุฉ ุชุฑุชุจุท ุฃูุถูุง ุจู:", c:["ุงุฑุชูุงุน ุถุบุท ุงูุฏู","ููุฑ ุงูุฏู","ุงููุณุงุญ","ุงูุฅุณูุฑุจูุท"], a:0},
      {q:"ูู ุทุฑู ุงูููุงูุฉ ูู ุงูุณููุฉ:", c:["ุงูุฅูุฑุงุท ูู ุงูุฃุทุนูุฉ ุงูุฏูููุฉ","ููุงุฑุณุฉ ุงููุดุงุท ุงูุจุฏูู","ููุฉ ุดุฑุจ ุงููุงุก","ุงูููู ุงูุฒุงุฆุฏ"], a:1},
      {q:"ูุคุดุฑ ูุชูุฉ ุงูุฌุณู (BMI) ููุณุชุฎุฏู ูู:", c:["ุญุณุงุจ ูุณุจุฉ ุงูููุชุงูููุงุช","ุชุญุฏูุฏ ุญุงูุฉ ุงููุฒู","ููุงุณ ุถุบุท ุงูุฏู","ููุงุณ ุงูุทุงูุฉ ุงูุญุฑุงุฑูุฉ"], a:1},
      {q:"ุณูุก ุงูุชุบุฐูุฉ ูุนูู:", c:["ุชูุงูู ุงูุทุนุงู ุจูุซุฑุฉ","ููุต ุฃู ุฒูุงุฏุฉ ุบูุฑ ูุชูุงุฒูุฉ ููุนูุงุตุฑ ุงูุบุฐุงุฆูุฉ","ุดุฑุจ ุงููุงุก ููุท","ุชูุงูู ุงูุจุฑูุชูู ูุญุฏู"], a:1},
      {q:"ููุต ุงูุจุฑูุชูู ูู ุงูุบุฐุงุก ูุณุจุจ ูุฑุถ:", c:["ุงููุณุงุญ","ุงูููุงุดููุฑููุฑ","ุงูุฅุณูุฑุจูุท","ููุฑ ุงูุฏู"], a:1},
      {q:"ุงููุงุฑุณูุณ ูุญุฏุซ ุจุณุจุจ:", c:["ููุต ุงูุจุฑูุชูู ูุงูุณุนุฑุงุช ุงูุญุฑุงุฑูุฉ ูุนูุง","ุฒูุงุฏุฉ ุงููุงูุณููู","ููุต ุงูุญุฏูุฏ ููุท","ุฒูุงุฏุฉ ุงูุฏููู"], a:0},
      {q:"ูุฑุถ ุงูุฅุณูุฑุจูุท ููุชุฌ ุนู ููุต:", c:["ููุชุงููู A","ููุชุงููู C","ููุชุงููู D","ุงูุญุฏูุฏ"], a:1},
      {q:"ูุฑุถ ุงููุณุงุญ ูุญุฏุซ ูุชูุฌุฉ ููุต:", c:["ููุชุงููู D","ููุชุงููู C","ุงูุจุฑูุชูู","ุงููุงุก"], a:0},
      {q:"ููุฑ ุงูุฏู (ุงูุฃููููุง) ููุชุฌ ุนู ููุต:", c:["ุงููุงูุณููู","ุงูุญุฏูุฏ","ุงูููุชุงููู C","ุงูููุชุงููู D"], a:1},
      {q:"ูู ุฃุนุฑุงุถ ููุฑ ุงูุฏู:", c:["ุถุนู ุงูุนุธุงู","ุดุญูุจ ูุฅุฑูุงู","ูุฒูู ุงููุซุฉ","ุชุดูู ุงูุณุงููู"], a:1},
      {q:"ููุต ููุชุงููู A ูุคุฏู ุฅูู:", c:["ุงูุนูู ุงููููู","ููุฑ ุงูุฏู","ุงููุณุงุญ","ุงูุณููุฉ"], a:0},
      {q:"ููุต ุงูููุฏ ูู ุงูุบุฐุงุก ูุณุจุจ:", c:["ุชุถุฎู ุงูุบุฏุฉ ุงูุฏุฑููุฉ","ุงูุฅุณูุฑุจูุท","ุงูููุงุดููุฑููุฑ","ุงููุงุฑุณูุณ"], a:0},
      {q:"ุงูุฃุทูุงู ุงููุตุงุจูู ุจุงูููุงุดููุฑููุฑ ูุธูุฑ ูุฏููู:", c:["ุจุทู ููุชูุฎ","ุถุนู ุงููุธุฑ","ุนุธุงู ูููุฉ","ูุฒูู ุงููุซุฉ"], a:0},
      {q:"ููููุงูุฉ ูู ุงูุณููุฉ ูููุตุญ ุจู:", c:["ุชูุงูู ุฃุทุนูุฉ ุนุงููุฉ ุงูุฏููู","ููุงุฑุณุฉ ุงูุฑูุงุถุฉ ูุชูุงูู ุบุฐุงุก ูุชูุงุฒู","ุงูููู ุงูููุฑุท","ุชูููู ุงููุงุก"], a:1},
      {q:"ููููุงูุฉ ูู ุงูุฅุณูุฑุจูุท ูุฌุจ ุชูุงูู:", c:["ุงูุญููุจ","ุงูููุงูู ุงูุญูุถูุฉ","ุงููุญูู","ุงูุฃุฑุฒ"], a:1},
      {q:"ูุฑุถ ุงููุณุงุญ ูููู ุงูููุงูุฉ ููู ุจู:", c:["ุดุฑุจ ุงูุญููุจ ูุงูุชุนุฑุถ ููุดูุณ","ุฃูู ุงููุญูู ููุท","ุดุฑุจ ุงููุงุก ุจูุซุฑุฉ","ุฃูู ุงูุฏููู"], a:0},
      {q:"ุณูุก ุงูุชุบุฐูุฉ ูุฏ ูุคุฏู ุฅูู:", c:["ุฒูุงุฏุฉ ุงูุฐูุงุก","ุถุนู ุงูููู","ุชูููุฉ ุงูููุงุนุฉ","ุฒูุงุฏุฉ ุงูุนุถูุงุช"], a:1},
      {q:"ุงูุณููุฉ ูุณูุก ุงูุชุบุฐูุฉ ูููู ูุนุงูุฌุชููุง ุจู:", c:["ุงูููู ุงูุทููู","ูุธุงู ุบุฐุงุฆู ูุชูุงุฒู + ูุดุงุท ุจุฏูู","ุชูุงูู ุงูุญูููุงุช","ุงูุงูุชูุงุน ุนู ุดุฑุจ ุงููุงุก"], a:1}"""
        
        # ุงุณุชุจุฏุงู ุจูู ุงูุฃุณุฆูุฉ
        content = re.sub(
            r'const bank = \[\s*\{q:.*?\}\s*\];',
            f'const bank = [\n{new_questions}\n    ];',
            content,
            flags=re.DOTALL
        )
        
        # ุญูุธ ุงูููู ุงููุญุฏุซ
        with open(file_path, 'w', encoding='utf-8') as file:
            file.write(content)
        
        print("๐ ุชู ุชุญุฏูุซ ุงูุฏุฑุณ 4-2 ุจูุฌุงุญ!")
        print("๐ ุฅุญุตุงุฆูุงุช ุงูุชุญุฏูุซ:")
        print("   โ ุงูุนููุงู: ุงูุณููุฉ ูุณูุก ุงูุชุบุฐูุฉ")
        print("   โ ุงูุฃูุฏุงู: 5 ุฃูุฏุงู ุฌุฏูุฏุฉ")
        print("   โ ุงูุฃุณุฆูุฉ: 20 ุณุคุงู ููุธู ูู 4 ูุฌููุนุงุช:")
        print("      - ุงููุฌููุนุฉ ุงูุฃููู: ุงูุณููุฉ (5 ุฃุณุฆูุฉ)")
        print("      - ุงููุฌููุนุฉ ุงูุซุงููุฉ: ุณูุก ุงูุชุบุฐูุฉ (5 ุฃุณุฆูุฉ)")
        print("      - ุงููุฌููุนุฉ ุงูุซุงูุซุฉ: ุงูุฃูุซูุฉ ุงูุชุทุจูููุฉ (5 ุฃุณุฆูุฉ)")
        print("      - ุงููุฌููุนุฉ ุงูุฑุงุจุนุฉ: ุงูููุงูุฉ ูุงูุชูููู (5 ุฃุณุฆูุฉ)")
        
        return True
        
    except Exception as e:
        print(f"โ ุฎุทุฃ ูู ุชุญุฏูุซ ุงูููู: {e}")
        return False

if __name__ == "__main__":
    update_lesson_4_2()